var bdPass=bdPass||{};bdPass.api=bdPass.api||{};bdPass.api.login=bdPass.api.login||(function(){var p="https://passport.baidu.com/",D=p+"v2/?reggetcodestr&callback=",f=p+"v2/api/?login",i=p+"v2/api/?logincheck",t=p+"v2/api/?otherplacecheck",v=p+"cgi-bin/genimage?",s=p+"img/v2/small_blank.gif",M=p+"forcsdnpasschange",h=document.charset||document.characterSet||"UTF-8",L={outerDomId:"",loginType:1,staticpage:"",u:"",bindEnterSubmit:false,safeflg:0,isMen:true,isPhone:false,onReady:function(O){},onInputErr:function(P,Q,O){},onInputTip:function(O,P){},onInputOk:function(O){},onSubmitStart:function(O){O.submit()},onCheckErr:function(P,O){},onSubmitedErr:function(P,O){},onSystemErr:function(Q,P,O){},onLoginSuccess:function(P,O,Q){if(O){O=decodeURIComponent(O);if(Q.needToModifyPassword=="1"){document.location=M+"?u="+O}else{document.location=decodeURIComponent(O)}}}},y=[],d={username:{type:"username",inputType:"text",rdNameKey:"username",label:"\u5E10\u53f7\uff1a",err:{"-2":"\u8BF7\u60A8\u8F93\u5165\u5E10\u53F7","-3":"\u60A8\u8F93\u5165\u7684\u5E10\u53F7\u683C\u5F0F\u6709\u8BEF","-11":"\u90AE\u7BB1\u8FC7\u957F\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165","-21":"\u60a8\u5c1d\u8bd5\u4f7f\u7528\u7528\u6237\u540d\u767b\u5f55\uff0c\u4f46\u7528\u6237\u540d\u592a\u957f\u3002\uff08\u4e0d\u8d85\u8fc77\u4e2a\u6c49\u5b57\u621614\u4e2a\u5b57\u8282\uff09","1":"\u7528\u6237\u540D\u8FC7\u957F\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165","2":"\u60A8\u8F93\u5165\u7684\u5E10\u53F7\u4E0D\u5B58\u5728"},tip:{"1":"\u60a8\u8fd1\u671f\u591a\u6b21\u5f02\u5e38\u9000\u51fa\u767e\u5ea6\uff01\u53ef\u80fd\u4e0e\u60a8\u4f7f\u7528\u7684\u6d4f\u89c8\u5668\u6709\u5173\uff0c\u5efa\u8bae\u60a8\u66f4\u6362\u4f7f\u7528\u5176\u4ed6\u6d4f\u89c8\u5668\u3002"},initEvent:[{eventType:"blur",runBeforeSubmit:false,listener:function(){F("username",this);G("username",this)}},{eventType:"keydown",runBeforeSubmit:false,listener:function(O){}},{eventType:"change",runBeforeSubmit:true,listener:function(P,Q){var R=Q?baidu.g(P):this;if(F("username",R)){var S=R.value,O=S.length;if(/^[0-9a-zA-Z\.\_-]+@([0-9a-zA-Z-]+\.)+[a-z]{2,4}$/.test(S)){if(O>60){b("username",R,"-11");return false}else{if(!Q){e(R)}a(R);return true}}else{if(!Q){e(R)}a(R);return true}}else{return false}}}]},phoneNumber:{type:"phoneNumber",inputType:"text",rdNameKey:"username",label:"\u624b\u673a\u53f7\uff1a",err:{"-2":"\u8BF7\u60A8\u8F93\u5165\u624B\u673A\u53F7","-3":"\u60A8\u8F93\u5165\u7684\u624B\u673A\u53F7\u683C\u5F0F\u6709\u8BEF","1":"\u60A8\u8F93\u5165\u7684\u624B\u673A\u53F7\u683C\u5F0F\u6709\u8BEF","2":"\u60A8\u7684\u624B\u673A\u53F7\u5C1A\u672A\u6CE8\u518C\u6216\u7ED1\u5B9A"},tip:{"1":"\u60a8\u8fd1\u671f\u591a\u6b21\u5f02\u5e38\u9000\u51fa\u767e\u5ea6\uff01\u53ef\u80fd\u4e0e\u60a8\u4f7f\u7528\u7684\u6d4f\u89c8\u5668\u6709\u5173\uff0c\u5efa\u8bae\u60a8\u66f4\u6362\u4f7f\u7528\u5176\u4ed6\u6d4f\u89c8\u5668\u3002"},initEvent:[{eventType:"blur",runBeforeSubmit:false,listener:function(){F("phoneNumber",this);G("phoneNumber",this)}},{eventType:"keydown",runBeforeSubmit:false,listener:function(O){C(O)}},{eventType:"change",runBeforeSubmit:true,listener:function(O,P){var Q=P?baidu.g(O):this;if(F("phoneNumber",Q)){if(/^\d{1,11}$/.test(Q.value)){if(!P){e(Q)}a(Q);return true}else{b("phoneNumber",Q,"-3");return false}}else{return false}}}]},password:{type:"password",inputType:"password",rdNameKey:"password",label:"\u5bc6\u7801\uff1a",err:{"-2":"\u8BF7\u60A8\u8F93\u5165\u5BC6\u7801","4":"\u60A8\u8F93\u5165\u7684\u8D26\u53F7\u6216\u5BC6\u7801\u6709\u8BEF\u000D\u000A"},initEvent:[{eventType:"keydown",runBeforeSubmit:false,listener:function(O){C(O)}},{eventType:"blur",runBeforeSubmit:true,listener:function(O,P){var Q=P?baidu.g(O):this;if(F("password",Q)){a(Q);return true}else{return false}}}]},verifycode:{type:"verifycode",inputType:"text",rdNameKey:"verifycode",maxlength:'maxlength="4"',label:"\u9a8c\u8bc1\u7801\uff1a",err:{"-2":"\u8BF7\u60A8\u8F93\u5165\u9A8C\u8BC1\u7801","6":"\u60A8\u8F93\u5165\u7684\u9A8C\u8BC1\u7801\u6709\u8BEF","257":"\u8BF7\u60A8\u8F93\u5165\u9A8C\u8BC1\u7801"},initEvent:[{eventType:"keydown",runBeforeSubmit:false,listener:function(O){C(O)}},{eventType:"blur",runBeforeSubmit:true,listener:function(O,P){var Q=P?baidu.g(O):this;if(F("verifycode",Q)){a(Q);return true}else{return false}}}]}},B={"-1":"\u7CFB\u7EDF\u9519\u8BEF\uFF0C\u8BF7\u60A8\u7A0D\u540E\u518D\u8BD5\u000D\u000A","5":"\u767B\u5F55\u8FC7\u4E8E\u9891\u7E41\uFF0C\u8BF724\u5C0F\u65F6\u540E\u518D\u8BD5","16":"\u5BF9\u4E0D\u8D77\uFF0C\u60A8\u7684\u5E10\u53F7\u4E0D\u53EF\u7528\u000D\u000A","100005":"\u8BBF\u95EE\u9519\u8BEF\uFF0C\u8BF7\u60A8\u7A0D\u540E\u518D\u8BD5\u000D\u000A","110024":"\u5E10\u53F7\u672A\u6FC0\u6D3B\uFF0C\u8BF7\u60A8\u9A8C\u8BC1\u540E\u767B\u5F55"},n='<p class="pass_login_p pass_login_p_#{type}" id="pass_login_p_#{type}_#{indexNumber}"><label class="pass_login_label pass_login_label_#{type}" id="pass_login_label_#{type}_#{indexNumber}" for="pass_login_#{type}_#{indexNumber}">#{label}</label><input class="pass_login_input pass_login_input_#{type}" type="#{inputType}" id="pass_login_#{type}_#{indexNumber}" name="#{rdNameKey}"/><span class="pass_login_err" id="pass_login_#{type}_#{indexNumber}_err"></span><span class="pass_login_tip" id="pass_login_#{type}_#{indexNumber}_tip"></span></p>',A='<p class="pass_login_p pass_login_p_img_verifycode" id="pass_login_p_img_verifycode_#{indexNumber}"><img src="#{_tempImgUrl}" class="pass_login_verifycode" id="pass_login_img_verifycode_#{indexNumber}" alt="\u9a8c\u8bc1\u7801\u56fe\u7247" title="\u9a8c\u8bc1\u7801\u56fe\u7247" /><span class="pass_login_change_verifycode" id="pass_login_change_verifycode_#{indexNumber}">\u770b\u4e0d\u6e05\uff1f</span></p>',r='<form class ="pass_login_form" id="pass_login_form_#{indexNumber}" form_number="#{indexNumber}" action="#{formAction}" target="pass_login_iframe_#{indexNumber}" method="post" style="display:none;"><iframe name="pass_login_iframe_#{indexNumber}" id="pass_login_iframe_#{indexNumber}" src="javascript:\'\'" style="display:none;"></iframe><p class="pass_login_p" id="pass_login_p_generalerror_#{indexNumber}"><span class="pass_login_generalerror" id="pass_login_generalerror_#{indexNumber}"></span></p>',j='<p class="pass_login_p pass_login_p_rem" id="pass_login_p_rem_#{indexNumber}"><input class="pass_login_input pass_login_input_rem" id="pass_login_rem_#{indexNumber}" name="mem_pass" type="checkbox"#{isMen}/><label class="pass_login_label pass_login_label_rem" id="pass_login_label_rem_#{indexNumber}" for="pass_login_rem_#{indexNumber}">\u8bb0\u4f4f\u6211\u7684\u767b\u5f55\u72b6\u6001</label></p><p class="pass_login_p pass_login_p_des" id="pass_login_p_des_#{indexNumber}">\u4f7f\u7528\u516c\u7528\u7535\u8111\u8bf7\u52ff\u9009\u62e9\u8be5\u9879</p><p class="pass_login_p pass_login_p_btn" id="pass_login_p_btn_#{indexNumber}"><input class="pass_login_input pass_login_input_submit" id="pass_login_input_submit_#{indexNumber}" type="button" value="\u767b\u5f55"/><a href="https://passport.baidu.com/?getpass_index" class="pass_login_a_fgtpwd" id="pass_login_a_fgtpwd_#{indexNumber}">\u5fd8\u8bb0\u5bc6\u7801\uff1f</a></p></form>',c='<input type="hidden" id="pass_login_hidden_#{name}_#{indexNumber}" name="#{name}" value="#{value}"/>',I=function(O){y.push({myConfig:{},formHiddenElements:{}});var Q=y.length-1;for(var P in L){if(O&&typeof(L[P])==typeof(O[P])){y[Q].myConfig[P]=O[P]}else{y[Q].myConfig[P]=L[P]}}y[Q].myConfig.formSimpleElementsArray=y[Q].myConfig.isPhone?["phoneNumber","password","verifycode"]:["username","password","verifycode"];y[Q].myConfig.ifCsdnModifyUrl=M;E(Q,[{key:"callback",value:"parent.bdPass.api.login._postCallback"},{key:"tpl",value:bdPass.api.params.login_tpl||""},{key:"loginType",value:y[Q].myConfig.loginType},{key:"staticpage",value:y[Q].myConfig.staticpage},{key:"safeflg",value:y[Q].myConfig.safeflg},{key:"u",value:y[Q].myConfig.u},{key:"index",value:Q},{key:"isPhone",value:y[Q].myConfig.isPhone?true:false},{key:"token",value:bdPass.api.params.login_token},{key:"codestring",value:bdPass.api.params.login_vcodestring||""},{key:"charset",value:h},{key:"ppui_logintime",value:""}]);z(Q);bdPass.api.login.loginTime=bdPass.api.login.loginTime||[];bdPass.api.login.loginTime[Q]=+new Date},E=function(R,Q){for(var P=0,O=Q.length;P<O;P++){y[R].formHiddenElements[Q[P].key]={name:Q[P].key,value:Q[P].value,indexNumber:R}}},J=function(T){var S=T.error+"",O=T.index,W=T.u;var R=(document.domain=="tieba.baidu.com"||document.domain=="wenku.baidu.com");var V=encodeURIComponent(document.location.href);var U=T.hao123Param||"";var P=function(Y){var Z=[];return function(ab){var aa=Z.push(new Image)-1;Z[aa].onload=function(){Y&&Y();Z[aa]=Z[aa].onload=null};Z[aa].src=ab}}();if(S=="0"){if(T.needToModifyPassword=="1"&&R){document.location=y[O].myConfig.ifCsdnModifyUrl+"?u="+V}else{var Q=setTimeout(function(){y[O].myConfig.onLoginSuccess(baidu.g("pass_login_form_"+O),W,T)},1000);P(document.location.protocol+"//user.hao123.com/static/crossdomain.php?bdu="+U+"&t="+Math.random(),function(){clearTimeout(Q);y[O].myConfig.onLoginSuccess(baidu.g("pass_login_form_"+O),W,T)})}}else{if(T.codestring&&T.codestring!="undefined"){k(O,T.codestring,true)}else{g(O,true)}var X;switch(S){case"1":case"2":X=y[O].myConfig.isPhone?"phoneNumber":"username";break;case"4":X="password";break;case"6":case"257":X="verifycode";break;case"-1":case"5":case"16":case"100005":case"110024":X="generalerror";break;case"120016":location=decodeURIComponent(decodeURI(T.gotourl));break;default:X="generalerror";S="-1";break}b(X,baidu.g("pass_login_"+X+"_"+O),S,{mail:T.mail});y[O].myConfig.onSubmitedErr(baidu.g("pass_login_form_"+O),baidu.g("pass_login_"+X+"_"+O))}},z=function(O){y[O].myindexNumber=O;var P,S=y[O].myConfig.formSimpleElementsArray,Q="",Y={indexNumber:O,formAction:f,remInputName:y[O].remInputName,isMen:y[O].myConfig.isMen?' checked="checked"':""},X="pass_login_form_"+O;P=S.length;Q+=baidu.string.format(r,Y);Q+=baidu.string.format(j,Y);baidu.g(y[O].myConfig.outerDomId).innerHTML+=Q;baidu.event.on("pass_login_input_submit_"+O,"click",q);while(P){Q="";var U=d[S[P-1]];if(U){U.indexNumber=O;var W="pass_login_"+U.type+"_"+O;y[O][U.type+"_id"]=W;Q+=baidu.string.format(n,U);if(U.type=="verifycode"){U._tempImgUrl=s;Q+=baidu.string.format(A,U)}}baidu.dom.insertHTML(X,"afterBegin",Q);if(U.type=="verifycode"){var Z=y[O].formHiddenElements.codestring.value;if(Z){k(O,Z,false)}else{g(O,false)}baidu.event.on("pass_login_change_verifycode_"+O,"click",function(ab){var aa=K(this.id);baidu.sio.callByServer(D+"bdPass.api.login._changeNewVcodeCallback&index="+O+"&v="+new Date().getTime())})}o(W,U,"initEvent");P--}var T=y[O].formHiddenElements;for(var V in T){baidu.dom.insertHTML(X,"afterBegin",baidu.string.format(c,T[V]))}var R=baidu.g(X);R.style.display="";y[O].myConfig.onReady(R)},o=function(S,T,R){if(R!="initEvent"&&R!="actionEvent"){return}var P=T[R];if(P){for(var Q=0,O=P.length;Q<O;Q++){baidu.event.on(S,P[Q].eventType,P[Q].listener)}}},e=function(O){var P=K(O.id);baidu.sio.callByServer(i+"&callback=bdPass.api.login._needCodestringCheckCallback&tpl="+(bdPass.api.params.login_tpl||"")+"&charset="+h+"&index="+P+"&username="+O.value+"&isphone="+[y[P].myConfig.isPhone?true:false]+"&time="+new Date().getTime())},H=function(O){if(O.errno==0){if(O.codestring){k(O.index,O.codestring,true)}else{g(O.index,true)}}},u=function(O){if(O.error_no=="110000"){baidu.g("pass_login_img_verifycode_"+O.thisIndex).setAttribute("src",v+O.verifystr+"&v="+new Date().getTime());baidu.g("pass_login_hidden_codestring_"+O.thisIndex).value=O.verifystr}},q=function(U){var O=baidu.event.getTarget(U).form,Z=O.getAttribute("form_number"),Y=y[Z];var P=Y.myConfig.haveCodeString?Y.myConfig.formSimpleElementsArray:baidu.array.remove(Y.myConfig.formSimpleElementsArray,"verifycode");for(var S=0,Q=P.length;S<Q;S++){for(var R=0,X=d[P[S]].initEvent,W=X.length;R<W;R++){var T=X[R];if(T.runBeforeSubmit){var V="pass_login_"+P[S]+"_"+Y.myindexNumber;if(!T.listener(V,true)){y[Z].myConfig.onCheckErr(O,baidu.g(V));return}}}}baidu.g("pass_login_generalerror_"+Z).innerHTML="";baidu.dom.g("pass_login_hidden_ppui_logintime_"+Z).value=+new Date-bdPass.api.login.loginTime[Z];y[Z].myConfig.onSubmitStart(O)},F=function(P,O){if(O&&O.value==""){b(P,O,"-2");return false}else{return true}},G=function(P,O){if(O&&O.value==""){return false}else{var Q=K(O.id);baidu.sio.callByServer(t+"&callback=bdPass.api.login._needOtherPlaceTipCallback&tpl="+(bdPass.api.params.login_tpl||"")+"&index="+Q+"&username="+encodeURIComponent(O.value)+"&inputType="+P+"&time="+new Date().getTime())}},x=function(O){l(O.type,baidu.g("pass_login_"+O.type+"_"+O.index),O.isShowTip)},m=function(O){if(typeof(O)=="string"){return O+"_err"}else{return baidu.g(O).id+"_err"}},N=function(O){if(typeof(O)=="string"){return O+"_tip"}else{return baidu.g(O).id+"_tip"}},l=function(Q,P,O){var R=K(P.id);if(O==1){w(P);var S,R;S=baidu.g(N(P));S.style.display="none";S.innerHTML=d[Q].tip["1"];y[R].myConfig.onInputTip(P,1)}else{y[R].myConfig.onInputTip(P,0)}},b=function(Q,P,S,O){var O=O||null;S+="";var T=K(P.id);if(Q=="generalerror"){P.innerHTML=B[S];y[T].myConfig.onSystemErr(baidu.g("pass_login_form_"+T),S,O)}else{var R,T;R=baidu.g(m(P));R.innerHTML=d[Q].err[S];y[T].myConfig.onInputErr(P,S,O)}if(S!=110024){}},a=function(O){var P=K(O.id);w(O);y[P].myConfig.onInputOk(O)},w=function(O){var P=baidu.g(m(O));P.innerHTML=""},K=function(O){return O.charAt(O.length-1)},k=function(Q,O,P){y[Q].myConfig.haveCodeString=true;y[Q].myConfig.formSimpleElementsArray=[y[Q].myConfig.formSimpleElementsArray[0],y[Q].myConfig.formSimpleElementsArray[1],"verifycode"];baidu.g("pass_login_img_verifycode_"+Q).setAttribute("src",v+O+"&v="+new Date().getTime());if(P){baidu.g("pass_login_hidden_codestring_"+Q).value=O}baidu.g("pass_login_p_verifycode_"+Q).style.display=baidu.g("pass_login_p_img_verifycode_"+Q).style.display=""},g=function(P,O){y[P].myConfig.haveCodeString=false;y[P].myConfig.formSimpleElementsArray=[y[P].myConfig.formSimpleElementsArray[0],y[P].myConfig.formSimpleElementsArray[1]];if(O){baidu.g("pass_login_hidden_codestring_"+P).value=""}baidu.g("pass_login_p_verifycode_"+P).style.display=baidu.g("pass_login_p_img_verifycode_"+P).style.display="none"},C=function(O){if(baidu.event.getKeyCode(O)=="13"){baidu.event.fire("pass_login_input_submit_"+K(baidu.event.getTarget(O).id),"click")}};return{init:function(O){if(O&&O.outerDomId&&typeof(O.outerDomId)=="string"&&O.staticpage&&typeof(O.staticpage)=="string"){I(O)}else{throw new Error("\u914d\u7f6e\u9879\u7f3a\u5c11\u5fc5\u586b\u9879\uff0c\u914d\u7f6e\u9879\u5bf9\u8c61\u5fc5\u987b\u6709<string>outerDomId\u548c<string>staticpage\u5b57\u6bb5");return}},_needOtherPlaceTipCallback:function(O){x(O)},_needCodestringCheckCallback:function(O){H(O)},_changeNewVcodeCallback:function(O){u(O)},_postCallback:function(O){J(O)}}})();(function(){window.bdPass.LoginTemplate=window.bdPass.LoginTemplate||{};window.bdPass.LoginTemplate.render=function(d,a,b){if(!b.jumpUrl){alert("No jumpUrl");throw new Error("No jumpUrl");return}var c=b;c.outerDomId=a;c.staticpage=b.jumpUrl;c.onSubmitStart=b.onSubmit;c.onLoginSuccess=b.onSuccess;c.onReady=b.onAfterRender;c.onSystemErr=b.onSystemError;bdPass.api.login.init(c)};if(bdPass.api.params.userCallback){bdPass.api.params.userCallback()}bdPass.api["parent.bdPass.api.login._postCallback"]=bdPass.api.login._postCallback})();